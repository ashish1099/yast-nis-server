/*
 * YaST2: Modules testsuite
 *
 * Description:
 *   Testsuite for the routines.ycp include
 *
 * Authors:
 *   Dan Vesely <dan@suse.cz>
 *
 * $Id$
 */

{
    include "testsuite.ycp";
    include "nis_server/io.ycp";

    map READ = $[
	"target" : $[
	    "size" : 42
	    ],
        "var" : $[
            "yp" : $[
                "makefile" : $[
                    "NOPUSH"        : "true",
                    "MERGE_PASSWD"  : "true",
                    "MERGE_GROUP"   : "true",
                    "MINUID"        : "100",
                    "MINGID"        : "100",
                    "maps"          : ["passwd", "group", "rpc", "services", "netid"]                            
                    ],
                "securenets" : [
                    $["netmask" : "255.0.0.0",
                      "network" : "127.0.0.0"
                        ]
                                
                    ],
                "ypservers" : []
                ]
            ],
        "rc" : $[
            "ypserver" : $[
                "YPPWD_CHFN"        : "no", 
                "YPPWD_CHSH"        : "no", 
                "YPPWD_SRCDIR"      : "/etc"
                ],
            "system" : $[
                "START_PORTMAP"       : "yes",
                "START_YPPASSWDD"     : "no",
                "START_YPSERV"        : "no",
                "START_YPXFRD"        : "no",
                "START_YPBIND"        : "yes",
                "YP_DOMAINNAME"       : "local"                
                ]
            ]
        ];


    DUMP ("YPMakefileVars");
    TEST (``(ReadPathFile (YPMakefileVars (), "/var/yp/Makefile")), [READ, $[], $[]], nil);
    DUMP ("YPServerVars");
    TEST (``(ReadPathFile (YPServerVars (), "/etc/rc.config.d/ypserv.rc.config")), [READ, $[], $[]], nil);
    DUMP ("YPSystemVars");
    TEST (``(ReadPathFile (YPSystemVars (), "/etc/rc.config")), [READ, $[], $[]], nil);
    DUMP ("YPSecurenets");
    TEST (``(ReadPathFile (YPSecurenets (), "/var/yp/securenets")), [READ, $[], $[]], nil);
    DUMP ("YPServers");
    TEST (``(ReadPathFile (YPServers (), "/var/yp/ypservers")), [READ, $[], $[]], nil);

}
